2025-03-30 12:06:32,746 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:06:32,747 - model - INFO - Generating itinerary for mood: happy, preferences: sports and adventurous
2025-03-30 12:07:08,221 - model - INFO - Successfully generated itinerary
2025-03-30 12:07:08,456 - model - INFO - Successfully saved itinerary to database
2025-03-30 12:12:43,009 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:12:43,010 - model - INFO - Refining itinerary with ID: 1
2025-03-30 12:12:55,322 - model - INFO - Successfully generated refined itinerary
2025-03-30 12:12:55,450 - model - ERROR - Failed to update refined itinerary in database: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'refined' column of 'itineraries' in the schema cache"}
2025-03-30 12:14:08,304 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:15:46,509 - model - INFO - Refining itinerary with ID: 3
2025-03-30 12:16:03,340 - model - INFO - Successfully generated refined itinerary
2025-03-30 12:16:03,445 - model - ERROR - Failed to update refined itinerary in database: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'refined' column of 'itineraries' in the schema cache"}
2025-03-30 12:17:25,093 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:18:23,970 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:18:29,874 - model - INFO - Refining itinerary with ID: 3
2025-03-30 12:18:46,031 - model - INFO - Successfully generated refined itinerary
2025-03-30 12:18:46,150 - model - INFO - Successfully updated refined itinerary in database
2025-03-30 12:20:12,563 - model - INFO - Refining itinerary with ID: 3
2025-03-30 12:20:32,440 - model - INFO - Successfully generated refined itinerary
2025-03-30 12:20:32,610 - model - INFO - Successfully updated refined itinerary in database
2025-03-30 12:21:53,685 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:22:04,146 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:22:09,167 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:24:38,661 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:24:41,338 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:24:43,974 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:25:22,201 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:25:24,068 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:25:31,560 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:25:33,868 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:27:02,650 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:27:25,013 - model - INFO - Generating itinerary for mood: want to do something fun, preferences: entertaining, yummy food, and maybe some sports!
2025-03-30 12:27:40,038 - model - INFO - Successfully generated itinerary
2025-03-30 12:27:40,261 - model - INFO - Successfully saved itinerary to database
2025-03-30 12:28:38,906 - model - INFO - Refining itinerary with ID: 4
2025-03-30 12:28:55,427 - model - INFO - Successfully generated refined itinerary
2025-03-30 12:28:55,549 - model - ERROR - Failed to update refined itinerary in database: {'code': '23502', 'details': 'Failing row contains (1, 4, **3-Day Fun-Packed Travel Itinerary**\n\n**Destination**: Austin, ..., null, 2025-03-30 16:28:55.606447+00).', 'hint': None, 'message': 'null value in column "refinement_request" of relation "refinement_history" violates not-null constraint'}
2025-03-30 12:29:36,205 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:29:51,530 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:29:54,129 - model - INFO - Refining itinerary with ID: 4
2025-03-30 12:30:10,518 - model - INFO - Successfully generated refined itinerary
2025-03-30 12:30:10,641 - model - ERROR - Failed to update refined itinerary in database: {'code': '23502', 'details': 'Failing row contains (2, 4, **3-Day Fun-Packed Travel Itinerary**\n\n**Destination**: Austin, ..., null, 2025-03-30 16:30:10.6984+00).', 'hint': None, 'message': 'null value in column "refinement_request" of relation "refinement_history" violates not-null constraint'}
2025-03-30 12:32:01,269 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:32:29,399 - model - INFO - OpenAI client initialized successfully
2025-03-30 12:32:56,045 - model - INFO - Refining itinerary with ID: 4
2025-03-30 12:32:56,226 - model - INFO - Original itinerary data: {'id': 4, 'mood': 'want to do something fun', 'preferences': 'entertaining, yummy food, and maybe some sports!', 'content': '**3-Day Fun-Packed Travel Itinerary**\n\n**Destination**: Austin, Texas\n\n---\n\n### Day 1: Entertainment & Culinary Delights\n\n**Morning:**\n\n- **Breakfast at Magnolia Cafe**\n  - Enjoy famous breakfast tacos and pancakes.\n  - Try the “Love Migas” with a side of queso.\n\n- **Explore South Congress Avenue**\n  - Stroll through eclectic shops, boutiques, and live music spots.\n  - Stop by Allen’s Boots for a classic Texas experience.\n\n**Afternoon:**\n\n- **Lunch at Torchy\'s Tacos**\n  - Savor creative tacos like the Trailer Park or Brushfire.\n  - Grab a seat on their patio for people-watching.\n\n- **Visit the Bullock Texas State History Museum**\n  - Dive into Texas history with interactive exhibits and an IMAX theater.\n  - Don\'t miss the La Belle shipwreck exhibit.\n\n**Evening:**\n\n- **Dinner at Barton Springs Picnic**\n  - Sample from a variety of food trucks (try the Gourdough\'s donuts!).\n  - Relax and enjoy the outdoor picnic vibe.\n\n- **Live Music on Sixth Street**\n  - Discover local talent at The Mohawk or Antone’s Nightclub.\n  - End the night with a stroll through the vibrant nightlife.\n\n---\n\n### Day 2: Adventure & Delectable Eats\n\n**Morning:**\n\n- **Breakfast at Mozart’s Coffee Roasters**\n  - Enjoy coffee or pastries by the lakefront.\n  - Take in the beautiful views of Lake Austin.\n\n- **Kayaking on Lady Bird Lake**\n  - Rent kayaks or stand-up paddleboards for a fun morning on the water.\n  - Explore the serene scenery and spot local wildlife.\n\n**Afternoon:**\n\n- **Lunch at Franklin Barbecue**\n  - Indulge in Texas’s finest brisket (arrive early, as lines can be long!).\n  - Try to pair your meal with their tangy slaw and beans.\n\n- **Visit Zilker Park**\n  - Relax or rent a bike to explore the expansive green space.\n  - Check out the Barton Springs Pool, a spring-fed swimming pool.\n\n**Evening:**\n\n- **Dinner at Odd Duck**\n  - Experience a menu focused on fresh, local ingredients.\n  - Try the pork belly sliders or goat ricotta gnocchi.\n\n- **Sunset at Mount Bonnell**\n  - Climb to the top for a breathtaking view of Austin at sunset.\n  - Perfect spot for photos and relaxation.\n\n---\n\n### Day 3: Sports & Local Flavors\n\n**Morning:**\n\n- **Breakfast at Juan in a Million**\n  - Famous for its hearty breakfast tacos.\n  - The "Don Juan" taco is a must-try.\n\n- **Barton Creek Greenbelt Hike**\n  - Enjoy outdoor adventure with hiking and natural swimming areas.\n  - Choose from various trails with varying difficulty levels.\n\n**Afternoon:**\n\n- **Lunch at P. Terry’s Burger Stand**\n  - Classic Austin burgers with all-natural beef.\n  - Pair with their home-cut fries and milkshakes.\n\n- **Rock Climbing at Austin Bouldering Project**\n  - Challenge yourself with bouldering routes for all skill levels.\n  - Great for an active and fun afternoon indoors.\n\n**Evening:**\n\n- **Dinner at Salt Lick BBQ (Driftwood)**\n  - Venture a bit out of town for an authentic BBQ experience.\n  - Bring your own drinks and enjoy smoked meats family-style.\n\n- **Visit Pinballz Arcade**\n  - End your trip with games and nostalgia at Pinballz.\n  - Enjoy a wide selection of arcade games and pinball machines.\n\n---\n\n**Note**: Remember to check opening hours and any reservation requirements in advance, and always explore local events happening during your visit for extra fun! Enjoy your trip!', 'created_at': '2025-03-30T16:27:40.310648+00:00', 'updated_at': '2025-03-30T16:27:40.310648+00:00', 'refined': False, 'refinement_request': None, 'original_content': '**3-Day Fun-Packed Travel Itinerary**\n\n**Destination**: Austin, Texas\n\n---\n\n### Day 1: Entertainment & Culinary Delights\n\n**Morning:**\n\n- **Breakfast at Magnolia Cafe**\n  - Enjoy famous breakfast tacos and pancakes.\n  - Try the “Love Migas” with a side of queso.\n\n- **Explore South Congress Avenue**\n  - Stroll through eclectic shops, boutiques, and live music spots.\n  - Stop by Allen’s Boots for a classic Texas experience.\n\n**Afternoon:**\n\n- **Lunch at Torchy\'s Tacos**\n  - Savor creative tacos like the Trailer Park or Brushfire.\n  - Grab a seat on their patio for people-watching.\n\n- **Visit the Bullock Texas State History Museum**\n  - Dive into Texas history with interactive exhibits and an IMAX theater.\n  - Don\'t miss the La Belle shipwreck exhibit.\n\n**Evening:**\n\n- **Dinner at Barton Springs Picnic**\n  - Sample from a variety of food trucks (try the Gourdough\'s donuts!).\n  - Relax and enjoy the outdoor picnic vibe.\n\n- **Live Music on Sixth Street**\n  - Discover local talent at The Mohawk or Antone’s Nightclub.\n  - End the night with a stroll through the vibrant nightlife.\n\n---\n\n### Day 2: Adventure & Delectable Eats\n\n**Morning:**\n\n- **Breakfast at Mozart’s Coffee Roasters**\n  - Enjoy coffee or pastries by the lakefront.\n  - Take in the beautiful views of Lake Austin.\n\n- **Kayaking on Lady Bird Lake**\n  - Rent kayaks or stand-up paddleboards for a fun morning on the water.\n  - Explore the serene scenery and spot local wildlife.\n\n**Afternoon:**\n\n- **Lunch at Franklin Barbecue**\n  - Indulge in Texas’s finest brisket (arrive early, as lines can be long!).\n  - Try to pair your meal with their tangy slaw and beans.\n\n- **Visit Zilker Park**\n  - Relax or rent a bike to explore the expansive green space.\n  - Check out the Barton Springs Pool, a spring-fed swimming pool.\n\n**Evening:**\n\n- **Dinner at Odd Duck**\n  - Experience a menu focused on fresh, local ingredients.\n  - Try the pork belly sliders or goat ricotta gnocchi.\n\n- **Sunset at Mount Bonnell**\n  - Climb to the top for a breathtaking view of Austin at sunset.\n  - Perfect spot for photos and relaxation.\n\n---\n\n### Day 3: Sports & Local Flavors\n\n**Morning:**\n\n- **Breakfast at Juan in a Million**\n  - Famous for its hearty breakfast tacos.\n  - The "Don Juan" taco is a must-try.\n\n- **Barton Creek Greenbelt Hike**\n  - Enjoy outdoor adventure with hiking and natural swimming areas.\n  - Choose from various trails with varying difficulty levels.\n\n**Afternoon:**\n\n- **Lunch at P. Terry’s Burger Stand**\n  - Classic Austin burgers with all-natural beef.\n  - Pair with their home-cut fries and milkshakes.\n\n- **Rock Climbing at Austin Bouldering Project**\n  - Challenge yourself with bouldering routes for all skill levels.\n  - Great for an active and fun afternoon indoors.\n\n**Evening:**\n\n- **Dinner at Salt Lick BBQ (Driftwood)**\n  - Venture a bit out of town for an authentic BBQ experience.\n  - Bring your own drinks and enjoy smoked meats family-style.\n\n- **Visit Pinballz Arcade**\n  - End your trip with games and nostalgia at Pinballz.\n  - Enjoy a wide selection of arcade games and pinball machines.\n\n---\n\n**Note**: Remember to check opening hours and any reservation requirements in advance, and always explore local events happening during your visit for extra fun! Enjoy your trip!', 'refinement_count': 0}
2025-03-30 12:33:09,222 - model - INFO - Successfully generated refined itinerary
2025-03-30 12:33:09,222 - model - INFO - Using refinement request for history: None
2025-03-30 12:33:09,222 - model - INFO - History data to be inserted: {'itinerary_id': 4, 'content': '**3-Day Fun-Packed Travel Itinerary**\n\n**Destination**: Austin, Texas\n\n---\n\n### Day 1: Entertainment & Culinary Delights\n\n**Morning:**\n\n- **Breakfast at Magnolia Cafe**\n  - Enjoy famous breakfast tacos and pancakes.\n  - Try the “Love Migas” with a side of queso.\n\n- **Explore South Congress Avenue**\n  - Stroll through eclectic shops, boutiques, and live music spots.\n  - Stop by Allen’s Boots for a classic Texas experience.\n\n**Afternoon:**\n\n- **Lunch at Torchy\'s Tacos**\n  - Savor creative tacos like the Trailer Park or Brushfire.\n  - Grab a seat on their patio for people-watching.\n\n- **Visit the Bullock Texas State History Museum**\n  - Dive into Texas history with interactive exhibits and an IMAX theater.\n  - Don\'t miss the La Belle shipwreck exhibit.\n\n**Evening:**\n\n- **Dinner at Barton Springs Picnic**\n  - Sample from a variety of food trucks (try the Gourdough\'s donuts!).\n  - Relax and enjoy the outdoor picnic vibe.\n\n- **Live Music on Sixth Street**\n  - Discover local talent at The Mohawk or Antone’s Nightclub.\n  - End the night with a stroll through the vibrant nightlife.\n\n---\n\n### Day 2: Adventure & Delectable Eats\n\n**Morning:**\n\n- **Breakfast at Mozart’s Coffee Roasters**\n  - Enjoy coffee or pastries by the lakefront.\n  - Take in the beautiful views of Lake Austin.\n\n- **Kayaking on Lady Bird Lake**\n  - Rent kayaks or stand-up paddleboards for a fun morning on the water.\n  - Explore the serene scenery and spot local wildlife.\n\n**Afternoon:**\n\n- **Lunch at Franklin Barbecue**\n  - Indulge in Texas’s finest brisket (arrive early, as lines can be long!).\n  - Try to pair your meal with their tangy slaw and beans.\n\n- **Visit Zilker Park**\n  - Relax or rent a bike to explore the expansive green space.\n  - Check out the Barton Springs Pool, a spring-fed swimming pool.\n\n**Evening:**\n\n- **Dinner at Odd Duck**\n  - Experience a menu focused on fresh, local ingredients.\n  - Try the pork belly sliders or goat ricotta gnocchi.\n\n- **Sunset at Mount Bonnell**\n  - Climb to the top for a breathtaking view of Austin at sunset.\n  - Perfect spot for photos and relaxation.\n\n---\n\n### Day 3: Sports & Local Flavors\n\n**Morning:**\n\n- **Breakfast at Juan in a Million**\n  - Famous for its hearty breakfast tacos.\n  - The "Don Juan" taco is a must-try.\n\n- **Barton Creek Greenbelt Hike**\n  - Enjoy outdoor adventure with hiking and natural swimming areas.\n  - Choose from various trails with varying difficulty levels.\n\n**Afternoon:**\n\n- **Lunch at P. Terry’s Burger Stand**\n  - Classic Austin burgers with all-natural beef.\n  - Pair with their home-cut fries and milkshakes.\n\n- **Rock Climbing at Austin Bouldering Project**\n  - Challenge yourself with bouldering routes for all skill levels.\n  - Great for an active and fun afternoon indoors.\n\n**Evening:**\n\n- **Dinner at Salt Lick BBQ (Driftwood)**\n  - Venture a bit out of town for an authentic BBQ experience.\n  - Bring your own drinks and enjoy smoked meats family-style.\n\n- **Visit Pinballz Arcade**\n  - End your trip with games and nostalgia at Pinballz.\n  - Enjoy a wide selection of arcade games and pinball machines.\n\n---\n\n**Note**: Remember to check opening hours and any reservation requirements in advance, and always explore local events happening during your visit for extra fun! Enjoy your trip!', 'refinement_request': None}
2025-03-30 12:33:09,329 - model - ERROR - Failed to update refined itinerary in database: {'code': '23502', 'details': 'Failing row contains (1, 4, **3-Day Fun-Packed Travel Itinerary**\n\n**Destination**: Austin, ..., null, 2025-03-30 16:33:09.391211+00).', 'hint': None, 'message': 'null value in column "refinement_request" of relation "refinement_history" violates not-null constraint'}
2025-03-30 12:33:45,086 - model - INFO - OpenAI client initialized successfully
